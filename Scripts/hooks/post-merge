#!/usr/bin/env bash

# post-merge
#
# https://git-scm.com/docs/githooks#_post_merge

git_root="$(git rev-parse --show-toplevel)"

# Git
cd "${git_root}" && git submodule update --init --recursive

# Install gems via bundler
bundle install

# ensure secrets file exists (minimal version)
./Scripts/generate-secrets-local.sh --ensure-only

# generate secrets from .env file if available
if [ -f ".env" ]; then
    ./Scripts/generate-secrets-local.sh
fi
