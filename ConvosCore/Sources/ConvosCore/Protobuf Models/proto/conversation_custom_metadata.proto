syntax = "proto3";

// ConversationCustomMetadata stores custom metadata for XMTP conversations
//
// Encoding optimizations for compact storage:
// - inboxId: Hex-decoded bytes (32 bytes) instead of hex string (64 chars) - saves ~32 bytes per member
// - expiresAt: Unix sfixed64 (8 bytes) instead of protobuf Timestamp (10-16 bytes)
// - DEFLATE compression applied if size >100 bytes (typically 20-40% reduction)
//
// Expected size for 5-member group: ~200-300 bytes (40-60% smaller than unoptimized)
message ConversationCustomMetadata {
    string description = 1;
    string tag = 2;
    repeated ConversationProfile profiles = 3;
    optional sfixed64 expiresAtUnix = 4;
}

// ConversationProfile represents a participant in the conversation
message ConversationProfile {
    bytes inboxId = 1;  // XMTP inbox ID as hex-decoded bytes
    optional string name = 2;
    optional string image = 3;
}
